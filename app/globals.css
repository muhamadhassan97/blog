@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --foreground-rgb: 0, 0, 0;
  --background-start-rgb: 255, 255, 255;
  --background-end-rgb: 255, 255, 255;
}

body {
  color: rgb(var(--foreground-rgb));
  background: linear-gradient(
      to bottom,
      transparent,
      rgb(var(--background-end-rgb))
    )
    rgb(var(--background-start-rgb));
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
  
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

/* Embed Container Styles */
.embed-container {
  @apply my-8 mx-auto rounded-lg overflow-hidden shadow-lg;
  max-width: 100%;
}

/* YouTube Embeds */
.youtube-embed {
  position: relative;
  padding-bottom: 56.25%; /* 16:9 aspect ratio */
  height: 0;
  overflow: hidden;
  @apply bg-gray-100 dark:bg-gray-800;
}

.youtube-embed iframe {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border: 0;
}

/* Twitter/X Embeds */
.twitter-embed {
  @apply flex justify-center items-center min-h-[200px] bg-white dark:bg-gray-900;
}

.twitter-tweet {
  @apply m-0 !important;
}

/* Instagram Embeds */
.instagram-embed {
  @apply flex justify-center items-center min-h-[400px] bg-white dark:bg-gray-900;
  max-width: 540px;
  margin-left: auto;
  margin-right: auto;
}

/* TikTok Embeds */
.tiktok-embed {
  @apply flex justify-center items-center min-h-[500px] bg-black;
  max-width: 605px;
  margin-left: auto;
  margin-right: auto;
}

/* Spotify Embeds */
.spotify-embed {
  @apply bg-gray-100 dark:bg-gray-800;
  height: 380px;
}

.spotify-embed iframe {
  width: 100%;
  height: 100%;
  border: 0;
  border-radius: 12px;
}

/* GitHub Gist Embeds */
.gist-embed {
  @apply bg-white dark:bg-gray-900 p-4;
}

.gist-embed .gist {
  @apply m-0;
}

/* CodePen Embeds */
.codepen-embed {
  position: relative;
  padding-bottom: 56.25%;
  height: 0;
  overflow: hidden;
  @apply bg-gray-100 dark:bg-gray-800;
}

.codepen-embed iframe {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border: 0;
}

/* GIF Embeds */
.gif-embed {
  @apply bg-gray-100 dark:bg-gray-800 flex items-center justify-center;
}

.gif-embed img {
  @apply max-w-full h-auto rounded-lg;
}

/* Enhanced Link Previews */
.prose a.link-preview {
  @apply inline-flex items-center gap-1 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors no-underline border-b border-blue-300 dark:border-blue-600 hover:border-blue-600 dark:hover:border-blue-400;
}

.prose a.link-preview .link-icon {
  @apply text-xs opacity-60;
}

/* Responsive Embeds */
@media (max-width: 640px) {
  .embed-container {
    @apply mx-0 rounded-none;
  }
  
  .spotify-embed {
    height: 152px; /* Compact player on mobile */
  }
}

/* Image embeds in prose */
.prose img {
  @apply rounded-lg shadow-md my-6;
}

.prose figure {
  @apply my-8;
}

.prose figcaption {
  @apply text-center text-sm text-gray-600 dark:text-gray-400 mt-2;
}
